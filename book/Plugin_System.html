<!DOCTYPE HTML>
<html lang="en" class="light" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Plugin System - Inexor Reactive Graph Flow</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="././book.css">
        <link rel="stylesheet" href="././mdbook-admonish.css">
        <link rel="stylesheet" href="graphql-playground.css">
        <link rel="stylesheet" href="./mdbook-admonish.css">

    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('light')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="About.html"><strong aria-hidden="true">1.</strong> About</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="About_Design_Goals.html"><strong aria-hidden="true">1.1.</strong> Design Goals</a></li><li class="chapter-item expanded "><a href="About_Roadmap.html"><strong aria-hidden="true">1.2.</strong> Roadmap</a></li><li class="chapter-item expanded "><a href="About_Changelog.html"><strong aria-hidden="true">1.3.</strong> Changelog</a></li><li class="chapter-item expanded "><a href="Development_License.html"><strong aria-hidden="true">1.4.</strong> License</a></li><li class="chapter-item expanded "><a href="Development_Code_of_Conduct.html"><strong aria-hidden="true">1.5.</strong> Code of Conduct</a></li></ol></li><li class="chapter-item expanded "><a href="Installation.html"><strong aria-hidden="true">2.</strong> Installation</a></li><li class="chapter-item expanded "><a href="Configuration.html"><strong aria-hidden="true">3.</strong> Configuration</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="Configuration_Logging.html"><strong aria-hidden="true">3.1.</strong> Logging</a></li><li class="chapter-item expanded "><a href="Configuration_Instance.html"><strong aria-hidden="true">3.2.</strong> Instance</a></li><li class="chapter-item expanded "><a href="Configuration_HTTP_GraphQL_Server.html"><strong aria-hidden="true">3.3.</strong> HTTP/GraphQL Server</a></li><li class="chapter-item expanded "><a href="Configuration_Plugins.html"><strong aria-hidden="true">3.4.</strong> Plugins</a></li><li class="chapter-item expanded "><a href="Configuration_Remotes.html"><strong aria-hidden="true">3.5.</strong> Remotes</a></li></ol></li><li class="chapter-item expanded "><a href="Model.html"><strong aria-hidden="true">4.</strong> Model</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="Model_Component.html"><strong aria-hidden="true">4.1.</strong> Component</a></li><li class="chapter-item expanded "><a href="Model_Entity_Type.html"><strong aria-hidden="true">4.2.</strong> Entity Type</a></li><li class="chapter-item expanded "><a href="Model_Relation_Type.html"><strong aria-hidden="true">4.3.</strong> Relation Type</a></li><li class="chapter-item expanded "><a href="Model_Property_Type.html"><strong aria-hidden="true">4.4.</strong> Property Type</a></li><li class="chapter-item expanded "><a href="Model_Flow_Type.html"><strong aria-hidden="true">4.5.</strong> Flow Type</a></li><li class="chapter-item expanded "><a href="Model_Extension.html"><strong aria-hidden="true">4.6.</strong> Extension</a></li><li class="chapter-item expanded "><a href="Model_Entity_Instance.html"><strong aria-hidden="true">4.7.</strong> Entity Instance</a></li><li class="chapter-item expanded "><a href="Model_Relation_Instance.html"><strong aria-hidden="true">4.8.</strong> Relation Instance</a></li><li class="chapter-item expanded "><a href="Model_Property_Instance.html"><strong aria-hidden="true">4.9.</strong> Property Instance</a></li><li class="chapter-item expanded "><a href="Model_Flow_Instances.html"><strong aria-hidden="true">4.10.</strong> Flow Instances</a></li></ol></li><li class="chapter-item expanded "><a href="GraphQL_API.html"><strong aria-hidden="true">5.</strong> GraphQL API</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="GraphQL_API_Components.html"><strong aria-hidden="true">5.1.</strong> Components</a></li><li class="chapter-item expanded "><a href="GraphQL_API_Entity_Types.html"><strong aria-hidden="true">5.2.</strong> Entity Types</a></li><li class="chapter-item expanded "><a href="GraphQL_API_Relation_Types.html"><strong aria-hidden="true">5.3.</strong> Relation Types</a></li><li class="chapter-item expanded "><a href="GraphQL_API_Flow_Types.html"><strong aria-hidden="true">5.4.</strong> Flow Types</a></li><li class="chapter-item expanded "><a href="GraphQL_API_Extension.html"><strong aria-hidden="true">5.5.</strong> Extension</a></li><li class="chapter-item expanded "><a href="GraphQL_API_Entity_Instances.html"><strong aria-hidden="true">5.6.</strong> Entity Instances</a></li><li class="chapter-item expanded "><a href="GraphQL_API_Relation_Instances.html"><strong aria-hidden="true">5.7.</strong> Relation Instances</a></li><li class="chapter-item expanded "><a href="GraphQL_API_Flow_Instances.html"><strong aria-hidden="true">5.8.</strong> Flow Instances</a></li><li class="chapter-item expanded "><a href="GraphQL_API_Property_Instance_Subscriptions.html"><strong aria-hidden="true">5.9.</strong> Property Instance Subscriptions</a></li><li class="chapter-item expanded "><a href="GraphQL_API_Instance_info.html"><strong aria-hidden="true">5.10.</strong> Instance Info</a></li><li class="chapter-item expanded "><a href="GraphQL_API_Plugins.html"><strong aria-hidden="true">5.11.</strong> Plugins</a></li><li class="chapter-item expanded "><a href="GraphQL_API_Remotes.html"><strong aria-hidden="true">5.12.</strong> Remotes</a></li><li class="chapter-item expanded "><a href="GraphQL_API_Shutdown.html"><strong aria-hidden="true">5.13.</strong> Shutdown</a></li></ol></li><li class="chapter-item expanded "><a href="Dynamic_Graph_API.html"><strong aria-hidden="true">6.</strong> Dynamic Graph API</a></li><li class="chapter-item expanded "><a href="Plugin_System.html" class="active"><strong aria-hidden="true">7.</strong> Plugin System</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="Plugin_System_Component_Provider.html"><strong aria-hidden="true">7.1.</strong> Component Provider</a></li><li class="chapter-item expanded "><a href="Plugin_System_Entity_Type_Provider.html"><strong aria-hidden="true">7.2.</strong> Entity Type Provider</a></li><li class="chapter-item expanded "><a href="Plugin_System_Relation_Type_Provider.html"><strong aria-hidden="true">7.3.</strong> Relation Type Provider</a></li><li class="chapter-item expanded "><a href="Plugin_System_Flow_Provider.html"><strong aria-hidden="true">7.4.</strong> Flow Provider</a></li><li class="chapter-item expanded "><a href="Plugin_System_Component_Behaviour_Provider.html"><strong aria-hidden="true">7.5.</strong> Component Behaviour Provider</a></li><li class="chapter-item expanded "><a href="Plugin_System_Entity_Behaviour_Provider.html"><strong aria-hidden="true">7.6.</strong> Entity Behaviour Provider</a></li><li class="chapter-item expanded "><a href="Plugin_System_Relation_Behaviour_Provider.html"><strong aria-hidden="true">7.7.</strong> Relation Behaviour Provider</a></li><li class="chapter-item expanded "><a href="Plugin_System_Web_Resource_Provider.html"><strong aria-hidden="true">7.8.</strong> Web Resource Provider</a></li></ol></li><li class="chapter-item expanded "><a href="Plugins.html"><strong aria-hidden="true">8.</strong> Plugins</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="Plugins_Arithmetic.html"><strong aria-hidden="true">8.1.</strong> Arithmetic</a></li><li class="chapter-item expanded "><a href="Plugins_Asset.html"><strong aria-hidden="true">8.2.</strong> Asset</a></li><li class="chapter-item expanded "><a href="Plugins_Base.html"><strong aria-hidden="true">8.3.</strong> Base</a></li><li class="chapter-item expanded "><a href="Plugins_Binary.html"><strong aria-hidden="true">8.4.</strong> Binary</a></li><li class="chapter-item expanded "><a href="Plugins_Comparison.html"><strong aria-hidden="true">8.5.</strong> Comparison</a></li><li class="chapter-item expanded "><a href="Plugins_Config.html"><strong aria-hidden="true">8.6.</strong> Config</a></li><li class="chapter-item expanded "><a href="Plugins_Connector.html"><strong aria-hidden="true">8.7.</strong> Connector</a></li><li class="chapter-item expanded "><a href="Plugins_GraphQL_Client.html"><strong aria-hidden="true">8.8.</strong> GraphQL Client</a></li><li class="chapter-item expanded "><a href="Plugins_GraphQL_Schema_Visualization.html"><strong aria-hidden="true">8.9.</strong> GraphQL Schema Visualization</a></li><li class="chapter-item expanded "><a href="Plugins_HTTP.html"><strong aria-hidden="true">8.10.</strong> HTTP</a></li><li class="chapter-item expanded "><a href="Plugins_JSON.html"><strong aria-hidden="true">8.11.</strong> JSON</a></li><li class="chapter-item expanded "><a href="Plugins_Logical.html"><strong aria-hidden="true">8.12.</strong> Logical</a></li><li class="chapter-item expanded "><a href="Plugins_Meta_Data.html"><strong aria-hidden="true">8.13.</strong> Meta Data</a></li><li class="chapter-item expanded "><a href="Plugins_Notification.html"><strong aria-hidden="true">8.14.</strong> Notification</a></li><li class="chapter-item expanded "><a href="Plugins_Numeric.html"><strong aria-hidden="true">8.15.</strong> Numeric</a></li><li class="chapter-item expanded "><a href="Plugins_Random.html"><strong aria-hidden="true">8.16.</strong> Random</a></li><li class="chapter-item expanded "><a href="Plugins_State.html"><strong aria-hidden="true">8.17.</strong> State</a></li><li class="chapter-item expanded "><a href="Plugins_Scheduler.html"><strong aria-hidden="true">8.18.</strong> Scheduler</a></li><li class="chapter-item expanded "><a href="Plugins_String.html"><strong aria-hidden="true">8.19.</strong> String</a></li><li class="chapter-item expanded "><a href="Plugins_System_Command.html"><strong aria-hidden="true">8.20.</strong> System Command</a></li><li class="chapter-item expanded "><a href="Plugins_System_Environment.html"><strong aria-hidden="true">8.21.</strong> System Environment</a></li><li class="chapter-item expanded "><a href="Plugins_Taxonomy.html"><strong aria-hidden="true">8.22.</strong> Taxonomy</a></li><li class="chapter-item expanded "><a href="Plugins_Value.html"><strong aria-hidden="true">8.23.</strong> Value</a></li></ol></li><li class="chapter-item expanded "><a href="Events.html"><strong aria-hidden="true">9.</strong> Events</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="Events_System.html"><strong aria-hidden="true">9.1.</strong> System Events</a></li><li class="chapter-item expanded "><a href="Events_Shutdown.html"><strong aria-hidden="true">9.2.</strong> Shutdown</a></li></ol></li><li class="chapter-item expanded "><a href="Reactive_Graph_Patterns.html"><strong aria-hidden="true">10.</strong> Reactive Graph Patterns</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="Reactive_Graph_Patterns_Generator_Action.html"><strong aria-hidden="true">10.1.</strong> Generators & Actions</a></li><li class="chapter-item expanded "><a href="Reactive_Graph_Patterns_Time_Graph.html"><strong aria-hidden="true">10.2.</strong> Time Graph</a></li></ol></li><li class="chapter-item expanded "><a href="System_Architecture.html"><strong aria-hidden="true">11.</strong> System Architecture</a></li><li class="chapter-item expanded "><a href="API.html"><strong aria-hidden="true">12.</strong> Application Programming Interface</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="API_Builders.html"><strong aria-hidden="true">12.1.</strong> Builders</a></li><li class="chapter-item expanded "><a href="API_RuntimeBuilder.html"><strong aria-hidden="true">12.2.</strong> RuntimeBuilder</a></li></ol></li><li class="chapter-item expanded "><a href="CLI.html"><strong aria-hidden="true">13.</strong> CLI</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="CLI_Usage.html"><strong aria-hidden="true">13.1.</strong> General Usage</a></li><li class="chapter-item expanded "><a href="CLI_REPL.html"><strong aria-hidden="true">13.2.</strong> REPL</a></li><li class="chapter-item expanded "><a href="CLI_Reference.html"><strong aria-hidden="true">13.3.</strong> Command Reference</a></li></ol></li><li class="chapter-item expanded "><a href="Development.html"><strong aria-hidden="true">14.</strong> Development</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="Development_Supported_Platforms.html"><strong aria-hidden="true">14.1.</strong> Supported Platforms</a></li><li class="chapter-item expanded "><a href="Development_Build.html"><strong aria-hidden="true">14.2.</strong> Build</a></li><li class="chapter-item expanded "><a href="Development_Code_Formatting.html"><strong aria-hidden="true">14.3.</strong> Code Formatting</a></li><li class="chapter-item expanded "><a href="Development_Binaries.html"><strong aria-hidden="true">14.4.</strong> Binaries</a></li><li class="chapter-item expanded "><a href="Development_Packaging.html"><strong aria-hidden="true">14.5.</strong> Packaging</a></li><li class="chapter-item expanded "><a href="Development_Documentation.html"><strong aria-hidden="true">14.6.</strong> Documentation</a></li></ol></li><li class="chapter-item expanded "><a href="Limitations.html"><strong aria-hidden="true">15.</strong> Limitations</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Inexor Reactive Graph Flow</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="5-plugin-system"><a class="header" href="#5-plugin-system">5. Plugin System</a></h1>
<p>The plugin system is a central building block and is therefore mentioned first. The goal of the plugin system is to keep
the core as small as possible. The core of the application is described in the next section. Plugins, on the other hand,
contain the functionalities.</p>
<p>The aim of the plugin system is also that you don't have to restart the core application completely just because a small
part has changed. It should be sufficient to restart the modified plugin.</p>
<p>Also, if a plugin stops working, or if the plugin's configuration is changed, restarting the plugin might avoid
restarting the core application.</p>
<p>In addition, the file size of the binary file is reduced since only its libraries are compiled in the core application.</p>
<p>In addition, only what is actually used is loaded. Plugins that are not required for the application can be deactivated.</p>
<h2 id="trait-plugin"><a class="header" href="#trait-plugin">Trait <code>Plugin</code></a></h2>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>impl Plugin for ComparisonPluginImpl {

    // ===== Metadata =====

    fn metadata(&amp;self) -&gt; Result&lt;PluginMetadata, PluginError&gt; {}

    // ===== Lifecycle =====

    fn init(&amp;self) -&gt; Result&lt;(), PluginError&gt; {}

    fn post_init(&amp;self) -&gt; Result&lt;(), PluginError&gt; {}

    fn pre_shutdown(&amp;self) -&gt; Result&lt;(), PluginError&gt; {}

    fn shutdown(&amp;self) -&gt; Result&lt;(), PluginError&gt; {}

    // ===== Context =====

    fn set_context(&amp;self, context: Arc&lt;dyn PluginContext&gt;) -&gt; Result&lt;(), PluginError&gt; {}

    // ===== Providers =====
    
    fn get_component_provider(&amp;self) -&gt; Result&lt;Arc&lt;dyn ComponentProvider&gt;, PluginError&gt; {}

    fn get_entity_type_provider(&amp;self) -&gt; Result&lt;Arc&lt;dyn EntityTypeProvider&gt;, PluginError&gt; {}

    fn get_relation_type_provider(&amp;self) -&gt; Result&lt;Arc&lt;dyn RelationTypeProvider&gt;, PluginError&gt; {}

    fn get_component_behaviour_provider(&amp;self) -&gt; Result&lt;Arc&lt;dyn ComponentBehaviourProvider&gt;, PluginError&gt; {}

    fn get_entity_behaviour_provider(&amp;self) -&gt; Result&lt;Arc&lt;dyn EntityBehaviourProvider&gt;, PluginError&gt; {}

    fn get_relation_behaviour_provider(&amp;self) -&gt; Result&lt;Arc&lt;dyn RelationBehaviourProvider&gt;, PluginError&gt; {}

    fn get_flow_provider(&amp;self) -&gt; Result&lt;Arc&lt;dyn FlowProvider&gt;, PluginError&gt; {}

    fn get_web_resource_provider(&amp;self) -&gt; Result&lt;Arc&lt;dyn WebResourceProvider&gt;, PluginError&gt; {}
}
<span class="boring">}</span></code></pre></pre>
<h3 id="provide-plugin-metadata"><a class="header" href="#provide-plugin-metadata">Provide plugin metadata</a></h3>
<p>Built-in metadata of the plugin:</p>
<ul>
<li>The name of the plugin (use environment variable <code>CARGO_PKG_NAME</code>)</li>
<li>The description of the plugin (use environment variable <code>CARGO_PKG_DESCRIPTION</code>)</li>
<li>The version of the plugin (use environment variable <code>CARGO_PKG_VERSION</code>)</li>
</ul>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>impl Plugin for ComparisonPluginImpl {
    fn metadata(&amp;self) -&gt; Result&lt;PluginMetadata, PluginError&gt; {
        Ok(PluginMetadata {
            name: env!("CARGO_PKG_NAME").into(),
            description: env!("CARGO_PKG_DESCRIPTION").into(),
            version: env!("CARGO_PKG_VERSION").into(),
        })
    }
}
<span class="boring">}</span></code></pre></pre>
<h3 id="lifecycle"><a class="header" href="#lifecycle">Lifecycle</a></h3>
<p>The plugin trait provides methods to do initialization and shutdown before and after setting up and shutting down
providers.</p>
<p>TODO: Lifecycle Image</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>impl Plugin for ComparisonPluginImpl {
    fn init(&amp;self) -&gt; Result&lt;(), PluginError&gt; {
        // Called before initialization of the providers
        Ok(())
    }

    fn post_init(&amp;self) -&gt; Result&lt;(), PluginError&gt; {
        // Called after initialization of the providers
        Ok(())
    }

    fn pre_shutdown(&amp;self) -&gt; Result&lt;(), PluginError&gt; {
        // Called before shutdown of the providers
        Ok(())
    }

    fn shutdown(&amp;self) -&gt; Result&lt;(), PluginError&gt; {
        // Called after shutdown of the providers
        Ok(())
    }
}
<span class="boring">}</span></code></pre></pre>
<h2 id="trait-plugincontext"><a class="header" href="#trait-plugincontext">Trait <code>PluginContext</code></a></h2>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub trait PluginContext: Send + Sync {
    /// Returns the component manager.
    fn get_component_manager(&amp;self) -&gt; Arc&lt;dyn ComponentManager&gt;;

    /// Returns the entity type manager.
    fn get_entity_type_manager(&amp;self) -&gt; Arc&lt;dyn EntityTypeManager&gt;;

    /// Returns the relation type manager.
    fn get_relation_type_manager(&amp;self) -&gt; Arc&lt;dyn RelationTypeManager&gt;;

    /// Returns the entity instance manager.
    fn get_entity_instance_manager(&amp;self) -&gt; Arc&lt;dyn EntityInstanceManager&gt;;

    /// Returns the relation instance manager.
    fn get_relation_instance_manager(&amp;self) -&gt; Arc&lt;dyn RelationInstanceManager&gt;;

    /// Returns the flow manager.
    fn get_flow_manager(&amp;self) -&gt; Arc&lt;dyn FlowManager&gt;;
}
<span class="boring">}</span></code></pre></pre>
<h3 id="make-use-of-the-plugin-context"><a class="header" href="#make-use-of-the-plugin-context">Make use of the plugin context</a></h3>
<p>The plugin have to store a reference to the plugin context. Therefore, you have to implement the method <code>set_context</code>
which is called during initialization:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>impl Plugin for ComparisonPluginImpl {
    fn set_context(&amp;self, context: Arc&lt;dyn PluginContext&gt;) -&gt; Result&lt;(), PluginError&gt; {
        self.context.0.write().unwrap().replace(context);
        Ok(())
    }
}
<span class="boring">}</span></code></pre></pre>
<p>If you want to make use of the <code>EntityInstanceManager</code> you have to:</p>
<ol>
<li>Get a RwLock on the context</li>
<li>Get a reference of the <code>EntityInstanceManager</code> using <code>get_entity_instance_manager</code></li>
<li>Create the entity instance using a builder (non-reactive)</li>
<li>Create/register the entity instance using <code>create</code> returns a reactive entity instance</li>
</ol>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>impl TestManager {
    fn create_entity(&amp;self) {
        let reader = self.context.0.read().unwrap();
        let entity_instance_manager = reader.as_ref().unwrap().get_entity_instance_manager().clone();
        let entity_instance = EntityInstanceBuilder::new("entity_type_name")
            .property("property_name", json!("property_value"))
            .get();
        let reactive_entity_instance = entity_instance_manager.create(entity_instance);
    }
}
<span class="boring">}</span></code></pre></pre>
<h3 id="implement-or-ignore-providers"><a class="header" href="#implement-or-ignore-providers">Implement or ignore providers</a></h3>
<p>If your plugin provide components you have to return a reference of the <code>ComponentProvider</code>:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>impl Plugin for ComparisonPluginImpl {
    fn get_component_provider(&amp;self) -&gt; Result&lt;Arc&lt;dyn ComponentProvider&gt;, PluginError&gt; {
        let component_provider = self.component_provider.clone();
        let component_provider: Result&lt;Arc&lt;dyn ComponentProvider&gt;, _&gt; = &lt;dyn query_interface::Object&gt;::query_arc(component_provider);
        if component_provider.is_err() {
            return Err(PluginError::NoComponentProvider);
        }
        Ok(component_provider.unwrap())
    }
}
<span class="boring">}</span></code></pre></pre>
<p>If your plugin doesn't provide components:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>impl Plugin for ComparisonPluginImpl {
    fn get_component_provider(&amp;self) -&gt; Result&lt;Arc&lt;dyn ComponentProvider&gt;, PluginError&gt; {
        Err(PluginError::NoComponentProvider)
    }
}
<span class="boring">}</span></code></pre></pre>
<p>The same applies to all other providers:</p>
<ul>
<li><code>ComponentProvider</code></li>
<li><code>EntityTypeProvider</code></li>
<li><code>RelationTypeProvider</code></li>
<li><code>EntityBehaviourProvider</code></li>
<li><code>RelationBehaviourProvider</code></li>
<li><code>FlowProvider</code></li>
<li><code>WebResourceProvider</code></li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="Dynamic_Graph_API.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="Plugin_System_Component_Provider.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="Dynamic_Graph_API.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="Plugin_System_Component_Provider.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->
        <script src="mermaid.min.js"></script>
        <script src="mermaid-init.js"></script>
        <script src="graphql-playground-react-middleware.js"></script>
        <script src="graphql-playground.js"></script>


    </div>
    </body>
</html>
